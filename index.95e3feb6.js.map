{"mappings":"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","sources":["src/index.js","src/js/gallery.js","src/js/filter.js","src/js/onSearch.js"],"sourcesContent":["import getRefs from './js/get-refs';\nimport openMovieDetails from './js/movie-details-open';\nimport footerModal from './js/footer-modal-open';\nimport { moviesApi, customPagination } from './js/gallery';\nimport './js/nightMode';\nimport topUp from './js/top.js';\nimport './js/filter';\nimport './js/onSearch';\n\nimport userAuth from './js/auth';\n\nconst refs = getRefs();\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  moviesApi.currentFetch = moviesApi.fetchTrendWeekMovies;\n  customPagination.moveToPage(moviesApi.currentPage);\n});\n\n// ------------ OPEN MOVIE MODAL --------------------\n\nrefs.imagesContainer.addEventListener('click', onMovieCardClick);\nasync function onMovieCardClick(e) {\n  if (e.target.classList.contains('gallery__img')) {\n    e.preventDefault();\n    const movieId = e.target.dataset.movieId;\n    await openMovieDetails(moviesApi.fetchMovieByID(movieId));\n    \n  }\n}\n// ---------- OPEN MOVIE MODAL END -------------------\n\nfooterModal();\n\ntopUp();\n","import getRefs from \"./get-refs\";\nimport { spinnerOn } from './loader';\nimport MoviesApi from \"./moviesApi\";\n\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.5.min.css';\n\nimport { Pagination as CustomPagination } from './custom/pagination/pagination'\n\nimport { createMarkupElementGallery } from \"./renderMarkup\";\n\nconst refs = getRefs();\n\nfunction renderMovies({ results, total_results, total_pages, page }){\n\n  refs.imagesContainer.innerHTML = \"\";  \n\n  if (results.length === 0) {\n    Notiflix.Notify.warning(\n      'âŒ Sorry, there are no movies matching your search query. Please try again.',\n      {\n        timeout: 3000,\n      }\n    );\n    refs.paginationList.classList.add(\"is-hidden\");\n    return\n  }\n\n  if (results.length > 0 && page === 1) {\n    Notiflix.Notify.success (\n      ` We found ${total_results} movies.`, {\n        timeout: 3000,}\n    )\n  }\n  \n  results.length && refs.imagesContainer.insertAdjacentHTML(\n      'afterbegin',\n      results.map(createMarkupElementGallery).join(''));\n  \n  refs.paginationList.classList.remove(\"is-hidden\");\n  customPagination.setTotalPages(total_pages);\n  \n  // Skeleton\n  spinnerOn();\n}\n\nconst moviesApi = new MoviesApi(renderMovies);\n\nconst customPagination = new CustomPagination(refs.paginationList,{\n    countPoint : 5,\n    onShow: (currentPage) => {\n      moviesApi.currentPage = currentPage;\n      window.scrollTo({ top: 240, behavior: 'smooth' });\n      moviesApi.currentFetch();\n    }\n    }\n  );\n\nexport {moviesApi, customPagination}","import { moviesApi, customPagination } from './gallery';\n\nimport getRefs from './get-refs';\n\nconst refs = getRefs();\n\n// set genres\nlet selectedGenre = [];\nlet selectedGenreName = [];\nsetGenre();\n\nasync function setGenre() {\n  try {\n    const genre = await moviesApi.getAllGenres();\n\n    genre.forEach(genre => {\n      const elem = document.createElement('li');\n      elem.classList.add('filter__genre-item');\n      elem.id = genre.id;\n      elem.innerText = genre.name;\n      elem.addEventListener('click', () => {\n        if (selectedGenre.length === 0) {\n          selectedGenre.push(genre.id);\n          selectedGenreName.push(genre.name);\n        } else {\n          if (selectedGenre.includes(genre.id)) {\n            selectedGenre.forEach((id, index) => {\n              if (id === genre.id) {\n                selectedGenre.splice(index, 1);\n                selectedGenreName.splice(index, 1);\n              }\n            });\n          } else {\n            selectedGenre.push(genre.id);\n            selectedGenreName.push(genre.name);\n          }\n        }\n\n        refs.searchInput.value = '';\n        moviesApi.genres = selectedGenre;\n        moviesApi.currentFetch = moviesApi.fetchMovieByGenres;\n        customPagination.moveToPage(1);\n\n        highlightSelection();\n        updateFilterSelectBtn();\n      });\n      refs.filterGenreList.append(elem);\n    });\n  } catch (error) {}\n}\n\n// highlight selected genre\nfunction highlightSelection() {\n  const genres = document.querySelectorAll('.filter__genre-item');\n  genres.forEach(genre => {\n    genre.classList.remove('filter__genre-item--highlight');\n  });\n  if (selectedGenre.length !== 0) {\n    refs.filterClear.classList.remove('filter--hidden');\n    selectedGenre.forEach(id => {\n      const filterHighlightedGenre = document.getElementById(id);\n      filterHighlightedGenre.classList.add('filter__genre-item--highlight');\n    });\n  } else {\n    refs.filterClear.classList.add('filter--hidden');\n    fetchTrendMovies();\n  }\n}\n\n// clear filter\nrefs.filterClear.addEventListener('click', onFilterClearBtn);\n\nfunction onFilterClearBtn() {\n  clearFilter();\n  fetchTrendMovies();\n}\n\nexport function clearFilter() {\n  if (selectedGenre.length !== 0) {\n    selectedGenre.forEach(id => {\n      const filterHighlightedGenre = document.getElementById(id);\n      filterHighlightedGenre.classList.remove('filter__genre-item--highlight');\n    });\n  }\n  selectedGenre = [];\n  selectedGenreName = [];\n  refs.filterClear.classList.add('filter--hidden');\n  refs.filterSelectBtn.innerHTML = 'Select genre';\n}\n\n// custom select\nrefs.filterSelectBtn.addEventListener('click', onFilterSelectBtn);\n\nfunction onFilterSelectBtn() {\n  refs.filterWrap.classList.toggle('filter--active');\n}\n\nfunction updateFilterSelectBtn() {\n  if (selectedGenreName.length === 0) {\n    refs.filterSelectBtn.innerHTML = 'Select genre';\n    return;\n  }\n  if (selectedGenreName.length === 1) {\n    refs.filterSelectBtn.innerHTML = selectedGenreName[0];\n    return;\n  }\n  if (selectedGenreName.length > 1) {\n    refs.filterSelectBtn.innerHTML = selectedGenreName[0] + '...';\n    return;\n  }\n}\n\n// fetch trend movies\n\nfunction fetchTrendMovies() {\n  moviesApi.currentPage = 1;\n  moviesApi.currentFetch = moviesApi.fetchTrendWeekMovies;\n  customPagination.moveToPage(moviesApi.currentPage);\n}\n\n// hide genre list by clicking outside\ndocument.onclick = function closeList(e) {\n  if (!refs.filterWrap.contains(e.target)) {\n    refs.filterWrap.classList.remove('filter--active');\n  }\n};\n","import getRefs from './get-refs';\nimport { moviesApi, customPagination } from './gallery';\nimport { clearFilter } from './filter';\n\nconst refs = getRefs();\n\nfunction onSearch(e) {\n  e.preventDefault();\n  clearFilter();\n\n  if (refs.searchInput.value) {\n    moviesApi.query = refs.searchInput.value;\n    moviesApi.currentFetch = moviesApi.fetchMovieQuery;\n    customPagination.moveToPage(1); \n  }\n}\n\nrefs.searchForm.addEventListener('submit', onSearch);"],"names":["$bpxeT","parcelRequire","$3vKGz","$6756f0db6f988caf$var$refs","default","$6756f0db6f988caf$export$736842a9f5582179","$KcxNJ","param","results","total_results","total_pages","page","imagesContainer","innerHTML","length","$parcel$interopDefault","$iU1Pc","Notify","warning","timeout","paginationList","classList","add","success","concat","insertAdjacentHTML","map","$5118m","createMarkupElementGallery","join","remove","$6756f0db6f988caf$export$716d0c43b3ac9b02","setTotalPages","$kvC6y","spinnerOn","$fLgVo","Pagination","countPoint","onShow","currentPage","window","scrollTo","top","behavior","currentFetch","$6142fea1849c7fbd$var$refs","$6142fea1849c7fbd$var$selectedGenre","$6142fea1849c7fbd$var$selectedGenreName","$6142fea1849c7fbd$var$_setGenre","$2TvXO","mark","_callee","getAllGenres","_ctx","sent","forEach","genre","elem","document","createElement","id","innerText","name","addEventListener","push","includes","index","splice","searchInput","value","genres","fetchMovieByGenres","moveToPage","$6142fea1849c7fbd$var$highlightSelection","$6142fea1849c7fbd$var$updateFilterSelectBtn","filterGenreList","append","apply","this","arguments","querySelectorAll","filterClear","getElementById","$6142fea1849c7fbd$var$fetchTrendMovies","$6142fea1849c7fbd$export$77cedf2a856f1597","filterSelectBtn","fetchTrendWeekMovies","$6142fea1849c7fbd$var$setGenre","filterWrap","toggle","onclick","e","contains","target","$749ffb571b0aa3a9$var$refs","searchForm","preventDefault","query","fetchMovieQuery","$b8f9b7833fa37166$var$refs","$b8f9b7833fa37166$var$_onMovieCardClick","movieId","dataset","$gBkTQ","fetchMovieByID","$2EooH","$d43SW"],"version":3,"file":"index.95e3feb6.js.map"}